kind: pipeline
type: docker
name: default

steps:
- name: backend
  image: composer
  commands:
  - cd backend && composer install

- name: frontend
  image: node
  commands:
  - cd frontend && npm install && npm run build

- name: discord notification
  image: appleboy/drone-discord
  settings:
    webhook_id:
      from_secret: discord_webhook_id
    webhook_token:
      from_secret: discord_webhook_token
    username: Drone
